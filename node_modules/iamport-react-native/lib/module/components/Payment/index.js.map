{"version":3,"names":["React","createRef","useEffect","useRef","useState","ValidationForPayment","ErrorOnParams","Linking","Platform","View","IMPConst","IamportUrl","WebView","viewStyles","Loading","Payment","_ref","userCode","tierCode","data","loading","callback","webviewSource","setWebviewSource","html","WEBVIEW_SOURCE_HTML","isWebViewLoaded","setIsWebViewLoaded","showLoading","setShowLoading","isInicisTransPaid","setIsInicisTransPaid","webview","smilepayRef","redirectUrl","M_REDIRECT_URL","m_redirect_url","undefined","trim","pg","startsWith","OS","current","baseUrl","SMILEPAY_BASE_URL","handleOpenURL","event","pay_method","iamportUrl","url","_webview$current","injectJavaScript","getInicisTransQuery","_data$app_scheme","_webview$current2","queryParameters","getQuery","scheme","niceTransRedirectionUrl","app_scheme","toLowerCase","callbackparam1","getStringifiedQuery","addEventListener","removeLoadingNeeded","isIframeWayPayment","customer_uid","validation","getIsValid","loadingContainer","webViewContainer","createElement","Fragment","containerStyle","ref","source","mixedContentMode","onLoadEnd","_webview$current5","popup","_webview$current3","_webview$current4","JSON","stringify","onMessage","e","encoded","encodeURIComponent","nativeEvent","decoded","decodeURIComponent","response","parse","originWhitelist","sharedCookiesEnabled","onShouldStartLoadWithRequest","request","isAppUrl","launchApp","catch","code","message","imp_success","error_code","error_msg","isPaymentOver","isIframeLoaded","style","getMessage"],"sourceRoot":"../../../../src","sources":["components/Payment/index.tsx"],"mappings":"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"}